/**
 * adapt-strap
 * @version v1.0.0 - 2014-09-14
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,a,t){"use strict";angular.module("adaptv.adaptStrap",["adaptv.adaptStrap.utils","adaptv.adaptStrap.treebrowser","adaptv.adaptStrap.tablelite","adaptv.adaptStrap.tableajax","adaptv.adaptStrap.loadingindicator","adaptv.adaptStrap.draggable","adaptv.adaptStrap.infinitedropdown"]).provider("$adConfig",function(){var e=this.iconClasses={expand:"glyphicon glyphicon-plus-sign",collapse:"glyphicon glyphicon-minus-sign",loadingSpinner:"glyphicon glyphicon-refresh ad-spin",firstPage:"glyphicon glyphicon-fast-backward",previousPage:"glyphicon glyphicon-backward",nextPage:"glyphicon glyphicon-forward",lastPage:"glyphicon glyphicon-fast-forward",sortAscending:"glyphicon glyphicon-chevron-up",sortDescending:"glyphicon glyphicon-chevron-down",sortable:"glyphicon glyphicon-resize-vertical",draggable:"glyphicon glyphicon-align-justify",selectedItem:"glyphicon glyphicon-ok"},a=this.paging={request:{start:"skip",pageSize:"limit",page:"page",sortField:"sort",sortDirection:"sort_dir",sortAscValue:"asc",sortDescValue:"desc"},response:{itemsLocation:"data",totalItems:"pagination.totalCount"}};this.$get=function(){return{iconClasses:e,paging:a}}}),angular.module("adaptv.adaptStrap.draggable",[]).directive("adDrag",["$rootScope","$parse",function(t,n){function o(o,i,l){function r(){i.attr("draggable","false"),g(!0)}function g(e){e&&(o.$on("$destroy",p),l.$observe("adDrag",u),o.$watch(l.adDragData,d),o.$on("draggable:start",s),o.$on("draggable:end",c),o.hasHandle?i.on(k,".ad-drag-handle",f):(i.on(k,f),i.addClass("ad-draggable")),w||(i.on("mousedown",".ad-drag-handle",function(){return!1}),i.on("mousedown",function(){return!1})))}function s(e,a){a.el===i&&a.callback&&a.callback(e)}function c(e,a){a.el===i&&a.callback&&a.callback(e)}function p(){g(!1)}function d(e){o.data=e}function u(e){T=o.$eval(e)}function f(e){T&&(w?(v(),q=setTimeout(function(){v(),C(e)},100),j.on(E,v),j.on(A,v)):C(e))}function m(){i.children().each(function(){$(this).width($(this).width())})}function v(){clearTimeout(q),j.off(E,v),j.off(A,v)}function C(e){T&&(e.preventDefault(),x=i.offset(),x=o.hasHandle?i.find(".ad-drag-handle").offset():i.offset(),i.addClass("ad-dragging"),I=e.pageX||e.originalEvent.touches[0].pageX,N=e.pageY||e.originalEvent.touches[0].pageY,z=I-x.left-H.scrollLeft(),L=N-x.top-H.scrollTop(),m(),D(z,L),j.on(E,b),j.on(A,h),t.$broadcast("draggable:start",{x:I,y:N,tx:z,ty:L,el:i,data:o.data,callback:P}))}function b(e){var a,n;T&&(e.preventDefault(),a=e.pageX||e.originalEvent.touches[0].pageX,n=e.pageY||e.originalEvent.touches[0].pageY,z=a-I+x.left-H.scrollLeft(),L=n-N+x.top-H.scrollTop(),D(z,L),t.$broadcast("draggable:move",{x:I,y:N,tx:z,ty:L,el:i,data:o.data}))}function h(e){T&&(e.preventDefault(),t.$broadcast("draggable:end",{x:I,y:N,tx:z,ty:L,el:i,data:o.data,callback:y}),i.removeClass("ad-dragging"),S(),j.off(E,b),j.off(A,h))}function P(e){o.onDragStartCallback&&o.$apply(function(){o.onDragStartCallback(o,{$data:o.data,$dragElement:i,$event:e})})}function y(e){o.onDragEndCallback&&o.$apply(function(){o.onDragEndCallback(o,{$data:o.data,$dragElement:i,$event:e})})}function S(){i.css({left:"",top:"",position:"","z-index":""})}function D(e,a){i.css({left:e,top:a,position:"fixed","z-index":99999})}o.draggable=l.adDrag,o.hasHandle="false"===l.adDragHandle||"undefined"==typeof l.adDragHandle?!1:!0,o.onDragStartCallback=n(l.adDragBegin)||null,o.onDragEndCallback=n(l.adDragEnd)||null,o.data=null;var x,I,N,z,L,w="ontouchstart"in a.documentElement,k="touchstart mousedown",E="touchmove mousemove",A="touchend mouseup",j=$(a),H=$(e),T=!1,q=null;r()}return{restrict:"A",link:o}}]).directive("adDrop",["$rootScope","$parse",function(a,t){function n(n,o,i){function l(){r(!0)}function r(e){e&&(i.$observe("adDrop",s),n.$on("$destroy",g),n.$on("draggable:move",p),n.$on("draggable:end",d),n.$on("draggable:change",c))}function g(){r(!1)}function s(e){f=n.$eval(e)}function c(e,a){m!==a.el&&(m=null)}function p(e,t){if(f&&o!==t.el){var i=u(t.tx,t.ty,t.el);null!==i&&(m=i,n.$apply(function(){n.onDropOverCallback(n,{$data:t.data,$dragElement:t.el,$dropElement:m,$event:e})}),a.$broadcast("draggable:change",{el:m}))}}function d(e,a){f&&m&&n.$apply(function(){n.onDropCallback(n,{$data:a.data,$dragElement:a.el,$dropElement:m,$event:e})})}function u(e,a,t){var n,i,l=o.offset(),r=Math.floor(o.outerHeight()/3);return e+=v.scrollLeft(),a+=v.scrollTop(),n=e+t.outerWidth(),i=a+t.outerHeight(),a>=l.top+r&&a<=l.top+o.outerHeight()-r&&e>=l.left&&e<=l.left+o.outerWidth()||i>=l.top+r&&i<=l.top+o.outerHeight()-r&&e>=l.left&&e<=l.left+o.outerWidth()?o:null}n.droppable=i.adDrop,n.onDropCallback=t(i.adDropEnd)||null,n.onDropOverCallback=t(i.adDropOver)||null;var f=!1,m=null,v=$(e);l()}return{restrict:"A",link:n}}]),angular.module("adaptv.adaptStrap.infinitedropdown",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adInfiniteDropdown",["$parse","$compile","$templateCache","$adConfig","adLoadPage","adDebounce","adStrapUtils","adLoadLocalPage",function(e,a,n,o,i,l,r,g){function s(s,c,p){s[p.dropdownName]={items:{list:[],paging:{currentPage:1,totalPages:t,pageSize:Number(p.pageSize)||10}},localConfig:{loadingData:!1,showDisplayProperty:p.displayProperty?!0:!1,showTemplate:p.template?!0:!1,loadTemplate:p.templateUrl?!0:!1,initialLabel:p.initialLabel||"Select",singleSelectionMode:e(p.singleSelectionMode)()?!0:!1,dynamicLabel:p.labelDisplayProperty?!0:!1,dimensions:{"max-height":p.maxHeight||"200px","max-width":p.maxWidth||"auto"}},selectedItems:s.$eval(p.selectedItems)||[],ajaxConfig:s.$eval(p.ajaxConfig),applyFilter:r.applyFilter,readProperty:r.getObjectProperty,isSelected:r.itemExistsInList};var d,u=s[p.dropdownName],f=n.get("infinitedropdown/infinitedropdown.tpl.html");u.addRemoveItem=function(e,a,t){e.stopPropagation(),u.localConfig.singleSelectionMode?u.selectedItems[0]=a:r.addRemoveItemFromList(a,t);var n=s.$eval(p.onItemClick);n&&n(a)},u.loadPage=l(function(e){d=Math.random(),u.localConfig.loadingData=!0;var a=s.$eval(p.pageLoader)||i,t={pageNumber:e,pageSize:u.items.paging.pageSize,sortKey:u.localConfig.predicate,sortDirection:u.localConfig.reverse,ajaxConfig:u.ajaxConfig,token:d},n=function(a){a.token===d&&(u.items.list=1===e?a.items:u.items.list.concat(a.items),u.items.paging.totalPages=a.totalPages,u.items.paging.currentPage=a.currentPage,u.localConfig.loadingData=!1)},o=function(){u.localConfig.loadingData=!1};p.localDataSource?(t.localData=s.$eval(p.localDataSource),n(g(t))):a(t).then(n,o)},10),u.loadNextPage=function(){u.localConfig.loadingData||u.items.paging.currentPage+1<=u.items.paging.totalPages&&u.loadPage(u.items.paging.currentPage+1)},u.loadPage(1),p.ajaxConfig&&s.$watch(p.ajaxConfig,function(){u.loadPage(1)},!0),p.localDataSource&&s.$watch(p.localDataSource,function(){u.loadPage(1)},!0),f=f.replace(/%=dropdownName%/g,p.dropdownName).replace(/%=displayProperty%/g,p.displayProperty).replace(/%=templateUrl%/g,p.templateUrl).replace(/%=template%/g,p.template).replace(/%=labelDisplayProperty%/g,p.labelDisplayProperty).replace(/%=btnClasses%/g,p.btnClasses||"btn btn-default").replace(/%=icon-selectedItem%/g,o.iconClasses.selectedItem),c.empty(),c.append(a(f)(s));var m=angular.element(c).find("ul")[0],v=l(function(){m.scrollTop+m.offsetHeight>=m.scrollHeight-300&&u.loadNextPage()},50);angular.element(m).bind("mousewheel",function(e){e.originalEvent&&e.originalEvent.deltaY&&(m.scrollTop+=e.originalEvent.deltaY,e.preventDefault(),e.stopPropagation()),v()})}return{restrict:"E",link:s}}]),angular.module("adaptv.adaptStrap.loadingindicator",[]).directive("adLoadingIcon",["$adConfig","$compile",function(e,a){return{restrict:"E",compile:function(){return{pre:function(t,n,o){var i=o.loadingIconClass||e.iconClasses.loadingSpinner,l=o.loadingIconSize?"ng-style=\"{'font-size': '"+o.loadingIconSize+"'}\"":"",r='<i class="'+i+'" '+l+"></i>";n.empty(),n.append(a(r)(t))}}}}}]).directive("adLoadingOverlay",["$adConfig",function(e){return{restrict:"E",templateUrl:"loadingindicator/loadingindicator.tpl.html",scope:{loading:"=",zIndex:"@",position:"@",containerClasses:"@",loadingIconClass:"@",loadingIconSize:"@"},compile:function(){return{pre:function(a){a.loadingIconClass=a.loadingIconClass||e.iconClasses.loading,a.loadingIconSize=a.loadingIconSize||"3em"}}}}}]),angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adTableAjax",["$parse","$compile","$templateCache","$adConfig","adLoadPage","adDebounce","adStrapUtils",function(e,a,n,o,i,l,r){function g(g,s,c){g[c.tableName]={items:{list:t,paging:{currentPage:1,totalPages:t,pageSize:t,pageSizes:e(c.pageSizes)()||[10,25,50]}},localConfig:{pagingArray:[],loadingData:!1,tableMaxHeight:c.tableMaxHeight},ajaxConfig:g.$eval(c.ajaxConfig),applyFilter:r.applyFilter,readProperty:r.getObjectProperty};var p,d=g[c.tableName],u=n.get("tableajax/tableajax.tpl.html");d.items.paging.pageSize=d.items.paging.pageSizes[0],d.loadPage=l(function(e){p=Math.random(),d.localConfig.loadingData=!0;var a=g.$eval(c.pageLoader)||i,t={pageNumber:e,pageSize:d.items.paging.pageSize,sortKey:d.localConfig.predicate,sortDirection:d.localConfig.reverse,ajaxConfig:d.ajaxConfig,token:p},n=function(e){e.token===p&&(d.items.list=e.items,d.items.paging.totalPages=e.totalPages,d.items.paging.currentPage=e.currentPage,d.localConfig.pagingArray=e.pagingArray,d.localConfig.loadingData=!1)},o=function(){d.localConfig.loadingData=!1};a(t).then(n,o)}),d.loadNextPage=function(){d.localConfig.loadingData||d.items.paging.currentPage+1<=d.items.paging.totalPages&&d.loadPage(d.items.paging.currentPage+1)},d.loadPreviousPage=function(){d.localConfig.loadingData||d.items.paging.currentPage-1>0&&d.loadPage(d.items.paging.currentPage-1)},d.loadLastPage=function(){d.localConfig.loadingData||d.items.paging.currentPage!==d.items.paging.totalPages&&d.loadPage(d.items.paging.totalPages)},d.pageSizeChanged=function(e){Number(e)!==d.items.paging.pageSize&&(d.items.paging.pageSize=Number(e),d.loadPage(1))},d.sortByColumn=function(e){e.sortKey&&(e.sortKey!==d.localConfig.predicate?(d.localConfig.predicate=e.sortKey,d.localConfig.reverse=!0):d.localConfig.reverse===!0?d.localConfig.reverse=!1:(d.localConfig.reverse=t,d.localConfig.predicate=t),d.loadPage(d.items.paging.currentPage))},d.loadPage(1),g.$watch(c.ajaxConfig,function(){d.loadPage(1)},!0),c.tableClasses=c.tableClasses||"table",c.paginationBtnGroupClasses=c.paginationBtnGroupClasses||"btn-group btn-group-sm",u=u.replace(/%=tableName%/g,c.tableName).replace(/%=columnDefinition%/g,c.columnDefinition).replace(/%=tableClasses%/g,c.tableClasses).replace(/%=paginationBtnGroupClasses%/g,c.paginationBtnGroupClasses).replace(/%=icon-firstPage%/g,o.iconClasses.firstPage).replace(/%=icon-previousPage%/g,o.iconClasses.previousPage).replace(/%=icon-nextPage%/g,o.iconClasses.nextPage).replace(/%=icon-lastPage%/g,o.iconClasses.lastPage).replace(/%=icon-sortAscending%/g,o.iconClasses.sortAscending).replace(/%=icon-sortDescending%/g,o.iconClasses.sortDescending).replace(/%=icon-sortable%/g,o.iconClasses.sortable),s.empty(),s.append(a(u)(g))}return{restrict:"E",link:g}}]),angular.module("adaptv.adaptStrap.tablelite",["adaptv.adaptStrap.utils"]).directive("adTableLite",["$parse","$http","$compile","$filter","$templateCache","$adConfig","adStrapUtils","adDebounce","adLoadLocalPage",function(e,a,n,o,i,l,r,g,s){function c(a,o,c){a[c.tableName]={items:{list:t,allItems:t,paging:{currentPage:1,totalPages:t,pageSize:t,pageSizes:e(c.pageSizes)()||[10,25,50]}},localConfig:{localData:r.parse(a.$eval(c.localDataSource)),pagingArray:[],selectable:c.selectedItems?!0:!1,draggable:c.draggable?!0:!1,showPaging:e(c.disablePaging)()?!1:!0,tableMaxHeight:c.tableMaxHeight},selectedItems:a.$eval(c.selectedItems),applyFilter:r.applyFilter,isSelected:r.itemExistsInList,addRemoveItem:r.addRemoveItemFromList,addRemoveAll:r.addRemoveItemsFromList,allSelected:r.itemsExistInList,readProperty:r.getObjectProperty};var p,d=a[c.tableName],u=i.get("tablelite/tablelite.tpl.html"),f=null,m=null,v=!1;d.items.paging.pageSize=d.items.paging.pageSizes[0],d.loadPage=g(function(e){var a,t=d.localConfig.localData;a={pageNumber:e,pageSize:d.localConfig.showPaging?d.items.paging.pageSize:t.length,sortKey:d.localConfig.predicate,sortDirection:d.localConfig.reverse,localData:t};var n=s(a);d.items.list=n.items,d.items.allItems=n.allItems,d.items.paging.currentPage=n.currentPage,d.items.paging.totalPages=n.totalPages,d.localConfig.pagingArray=n.pagingArray},100),d.loadNextPage=function(){d.items.paging.currentPage+1<=d.items.paging.totalPages&&d.loadPage(d.items.paging.currentPage+1)},d.loadPreviousPage=function(){d.items.paging.currentPage-1>0&&d.loadPage(d.items.paging.currentPage-1)},d.loadLastPage=function(){d.localConfig.disablePaging||d.loadPage(d.items.paging.totalPages)},d.pageSizeChanged=function(e){d.items.paging.pageSize=e,d.loadPage(1)},d.sortByColumn=function(e){e.sortKey&&(e.sortKey!==d.localConfig.predicate?(d.localConfig.predicate=e.sortKey,d.localConfig.reverse=!0):d.localConfig.reverse===!0?d.localConfig.reverse=!1:(d.localConfig.reverse=t,d.localConfig.predicate=t),d.loadPage(d.items.paging.currentPage))},d.onDragStart=function(e,a){var t=a.parent();f=$("<tr><td colspan="+a.find("td").length+">&nbsp;</td></tr>"),p=a.index()+(d.items.paging.currentPage-1)*d.items.paging.pageSize-1,a[0]!==t.children().last()[0]?a.next().before(f):t.append(f),$("body").append(a)},d.onDragEnd=function(){},d.onDragOver=function(e,a,t){t.next()[0]===f[0]?t.before(f):t.prev()[0]===f[0]&&t.after(f)},d.onDropEnd=function(e,a){var t;f.next()[0]?f.next().before(a):f.prev()[0]&&f.prev().after(a),f.remove(),v=!0,t=a.index()+(d.items.paging.currentPage-1)*d.items.paging.pageSize-1,r.moveItemInList(p,t,d.localConfig.localData),m&&(m.removeClass("btn-primary"),m=null)},d.onNextPageButtonOver=function(e,a,t){m&&(m.removeClass("btn-primary"),m=null),"disabled"!==t.attr("disabled")&&(m=t,m.addClass("btn-primary"))},d.onNextPageButtonDrop=function(e,a){var t;m&&(v=!0,"btnPrev"===m.attr("id")&&(t=d.items.paging.pageSize*(d.items.paging.currentPage-1)-1),"btnNext"===m.attr("id")&&(t=d.items.paging.pageSize*d.items.paging.currentPage),r.moveItemInList(p,t,d.localConfig.localData),f.remove(),a.remove(),m.removeClass("btn-primary"),m=null)},d.loadPage(1),c.tableClasses=c.tableClasses||"table",c.paginationBtnGroupClasses=c.paginationBtnGroupClasses||"btn-group btn-group-sm",u=u.replace(/%=tableName%/g,c.tableName).replace(/%=columnDefinition%/g,c.columnDefinition).replace(/%=paginationBtnGroupClasses%/g,c.paginationBtnGroupClasses).replace(/%=tableClasses%/g,c.tableClasses).replace(/%=icon-firstPage%/g,l.iconClasses.firstPage).replace(/%=icon-previousPage%/g,l.iconClasses.previousPage).replace(/%=icon-nextPage%/g,l.iconClasses.nextPage).replace(/%=icon-lastPage%/g,l.iconClasses.lastPage).replace(/%=icon-sortAscending%/g,l.iconClasses.sortAscending).replace(/%=icon-sortDescending%/g,l.iconClasses.sortDescending).replace(/%=icon-sortable%/g,l.iconClasses.sortable).replace(/%=icon-draggable%/g,l.iconClasses.draggable),o.empty(),o.append(n(u)(a)),a.$watch(c.localDataSource,function(){d.loadPage(d.items.paging.currentPage)},!0)}return{restrict:"E",link:c}}]),angular.module("adaptv.adaptStrap.treebrowser",[]).directive("adTreeBrowser",["$compile","$http","$adConfig","$templateCache",function(e,a,t,n){function o(o,i,l){o[l.treeName]={toggle:function(e,a){var t;e.stopPropagation(),t=o.$eval(l.toggleCallback),t?t(a):a._ad_expanded=!a._ad_expanded},hasChildren:function(e){var a=o.$eval(l.hasChildren),t=e[l.childNode]&&e[l.childNode].length>0;return a&&(t=a(e)),t},localConfig:{showHeader:l.nodeHeaderUrl?!0:!1}};var r=l.treeName||"",g=l.nodeTemplateUrl||"",s=l.nodeHeaderUrl||"",c=l.childrenPadding||15,p="",d=function(a,g){var s=n.get("treebrowser/treebrowser.tpl.html");p=s.replace(/%=treeName%/g,r).replace(/%=treeRootName%/g,l.treeRoot).replace(/%=bordered%/g,l.bordered).replace(/%=icon-expand%/g,t.iconClasses.expand).replace(/%=icon-collapse%/g,t.iconClasses.collapse).replace(/%=icon-loadingSpinner%/g,t.iconClasses.loadingSpinner).replace(/%=childNodeName%/g,l.childNode).replace(/%=childrenPadding%/g,c).replace(/%=rowNgClass%/g,l.rowNgClass||"").replace(/%=nodeTemplate%/g,a).replace(/%=nodeHeaderTemplate%/g,g||""),i.empty(),i.append(e(p)(o))};""!==g?a.get(g,{cache:n}).success(function(e){""!==s?a.get(s,{cache:n}).success(function(a){d(e,a)}):d(e,"")}):d('<span>{{ item.name || "" }}</span>')}return{restrict:"E",link:o}}]),angular.module("adaptv.adaptStrap.utils",[]).factory("adStrapUtils",["$filter",function(e){var a=function(e,a){var t=a.split(".");if(e)for(;t.length;)e&&(e=e[t.shift()]);return e},t=function(a,t){var n,o;return t&&(n=t.split(":"),o=n[1],a=o?e(n[0])(a,o):e(n[0])(a)),a},n=function(e,a){var t=!1;return a.forEach(function(a){angular.equals(e,a)&&(t=!0)}),t},o=function(e,a){var t,o=!0;for(t=0;t<e.length;t++)if(n(e[t],a)===!1){o=!1;break}return o},i=function(e,a){a.push(e)},l=function(e,a){var t;for(t=a.length-1;t>-1;t--)angular.equals(e,a[t])&&a.splice(t,1)},r=function(e,a){var t,n=!1;for(t=a.length-1;t>-1;t--)angular.equals(e,a[t])&&(a.splice(t,1),n=!0);n===!1&&a.push(e)},g=function(e,a){e.forEach(function(e){n(e,a)||r(e,a)})},s=function(e,a){o(e,a)?a.length=0:g(e,a)},c=function(e,a,t){a<t.length&&t.splice(a,0,t.splice(e,1)[0])},p=function(e){var a=[];return angular.isArray(e)?a=e:angular.forEach(e,function(e){a.push(e)}),a},d=function(e,a){for(var t=a.split(".");t.length;)e=e[t.shift()];return e};return{evalObjectProperty:a,applyFilter:t,itemExistsInList:n,itemsExistInList:o,addItemToList:i,removeItemFromList:l,addRemoveItemFromList:r,addItemsToList:g,addRemoveItemsFromList:s,moveItemInList:c,parse:p,getObjectProperty:d}}]).factory("adDebounce",["$timeout","$q",function(e,a){var t=function(t,n,o,i){var l=null,r=a.defer(),g=n||300;return function(){var n=i||this,s=arguments,c=o&&!l,p=function(){o||(r.resolve(t.apply(n,s)),r=a.defer())};return l&&e.cancel(l),l=e(p,g),c&&(r.resolve(t.apply(n,s)),r=a.defer()),r.promise}};return t}]).directive("adCompileTemplate",["$compile",function(e){return function(a,t,n){a.$watch(function(e){return e.$eval(n.adCompileTemplate)},function(n){t.html(n),e(t.contents())(a)})}}]).factory("adLoadPage",["$adConfig","$http","adStrapUtils",function(e,a,t){return function(n){var o=(n.pageNumber-1)*n.pageSize,i=angular.copy(e.paging),l=angular.copy(n.ajaxConfig);l.paginationConfig&&l.paginationConfig.request&&angular.extend(i.request,l.paginationConfig.request),l.paginationConfig&&l.paginationConfig.response&&angular.extend(i.response,l.paginationConfig.response),l.params[i.request.start]=o,l.params[i.request.pageSize]=n.pageSize,l.params[i.request.page]=n.pageNumber,n.sortKey&&(l.params[i.request.sortField]=n.sortKey),n.sortDirection===!1?l.params[i.request.sortDirection]=i.request.sortAscValue:n.sortDirection===!0&&(l.params[i.request.sortDirection]=i.request.sortDescValue);var r;return r="JSONP"===l.method?a.jsonp(l.url+"?callback=JSON_CALLBACK",l):a(l),r.then(function(e){for(var a={items:t.evalObjectProperty(e.data,i.response.itemsLocation),currentPage:n.pageNumber,totalPages:Math.ceil(t.evalObjectProperty(e.data,i.response.totalItems)/n.pageSize),pagingArray:[],token:n.token},o=5,l=n.pageNumber-Math.floor(o/2),r=l;r<=n.pageNumber;r++)r>0&&a.pagingArray.push(r);for(;a.pagingArray.length<o&&!(r>a.totalPages);)a.pagingArray.push(r),r++;return a})}}]).factory("adLoadLocalPage",["$filter",function(e){return function(a){var n,o,i={items:t,currentPage:a.pageNumber,totalPages:t,pagingArray:[],token:a.token},l=(a.pageNumber-1)*a.pageSize,r=l+a.pageSize,g=a.localData;o=e("orderBy")(g,a.sortKey,a.sortDirection),i.items=o.slice(l,r),i.allItems=g,i.currentPage=a.pageNumber,i.totalPages=Math.ceil(g.length/a.pageSize);var s=5,c=a.pageNumber-Math.floor(s/2);for(n=c;n<=a.pageNumber;n++)n>0&&i.pagingArray.push(n);for(;i.pagingArray.length<s&&!(n>i.totalPages);)i.pagingArray.push(n),n++;return i}}])}(window,document);